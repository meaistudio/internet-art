<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dynamic Pixel Map Art</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        cursor: crosshair;
    }
    canvas {
        display: block;
    }
</style>
</head>
<body>
<canvas id="dynamicCanvas"></canvas>

<script>
const canvas = document.getElementById('dynamicCanvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Map pixel dari input sebelumnya
const pixelMapString = `
1111111111111111011011111111111111111111
1111111111101111101010110011111111111111
1111111011110001101010101111111111111111
1111111111110001101110001011111110111111
1111111100110110000110000011111111111111
1111111000100010000110010000111111110011
1111001100110000000100001000010001110111
1101000010000000000110001001000011111111
0010100000000100011100011011001110101001
1000000000111111111100011000000000100001
0101000011111111111111111000000000000000
0100001111111111111111111001100000000000
0100001111111101111101111001001000001001
1100000001111001010001111111000011001010
0000001100100000110011100001100011110000
0000100000001101100011000101000001110100
1000110010101000001011100011110001100000
1010111110111000000100000011111110100111
1011111110001000000000110011100000001011
1011110100100001000000100100100000011001
1011111000000000100000011100111000011000
1111110000000000100111110100001111110111
1110000001000010001100000000000011100111
1110010001101111111100001000001111010111
0101000010111111110111110011000110100111
0011010010110111010011111111101000000111
0000111010101011101111111111100000010010
0000111100111111111111011111101000011100
0100101101111111111111101111111011010011
1100101101011111111111111011100110101101
1111111111111111111110110001101110101001
1111111110010011001110011101001110001000
1111011111101011101111111110111011011000
1111011111100101111111111111110000111111
1111111110100111011111110001001111100111
1111111110001010011111101111011111100001
1111111110000010000110101001111000110010
1111011110000100000000101011011011111101
0101111111001101001001000011001111111011
1111111111111111101101100001111111011011
`;

// Konversi string menjadi array 2D
const pixelMap = pixelMapString.trim().split('\n').map(line => line.split('').map(Number));

const CMYK = ['cyan', 'magenta', 'yellow', 'white'];

// Array untuk menyimpan pixel dinamis
let pixels = [];

function initPixels() {
    pixels = [];
    const rows = pixelMap.length;
    const cols = pixelMap[0].length;
    const sizeX = canvas.width / cols;
    const sizeY = canvas.height / rows;
    const pixelSize = Math.min(sizeX, sizeY);

    for(let y=0; y<rows; y++){
        for(let x=0; x<cols; x++){
            if(pixelMap[y][x] === 1){
                pixels.push({
                    x: x*pixelSize,
                    y: y*pixelSize,
                    size: pixelSize,
                    color: CMYK[Math.floor(Math.random()*CMYK.length)],
                    vx: (Math.random()-0.5)*2, // gerakan horizontal
                    vy: (Math.random()-0.5)*2  // gerakan vertical
                });
            }
        }
    }
}

// Draw frame
function draw() {
    ctx.fillStyle = 'rgba(0,0,0,0.1)'; // jejak samar
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    pixels.forEach(p => {
        // Draw gradasi sederhana
        const grad = ctx.createRadialGradient(p.x + p.size/2, p.y + p.size/2, 0, p.x + p.size/2, p.y + p.size/2, p.size/2);
        grad.addColorStop(0, p.color);
        grad.addColorStop(1, 'black');
        ctx.fillStyle = grad;
        ctx.fillRect(p.x, p.y, p.size, p.size);

        // Update posisi
        p.x += p.vx;
        p.y += p.vy;

        // Tetap di dalam canvas
        if(p.x < 0) { p.x = 0; p.vx *= -1; }
        if(p.x + p.size > canvas.width) { p.x = canvas.width - p.size; p.vx *= -1; }
        if(p.y < 0) { p.y = 0; p.vy *= -1; }
        if(p.y + p.size > canvas.height) { p.y = canvas.height - p.size; p.vy *= -1; }
    });

    requestAnimationFrame(draw);
}

// Klik untuk reset warna
canvas.addEventListener('click', () => {
    pixels.forEach(p => {
        p.color = CMYK[Math.floor(Math.random()*CMYK.length)];
    });
});

// Resize
window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    initPixels();
});

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
initPixels();
draw();
</script>
</body>
</html>
